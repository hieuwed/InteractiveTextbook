<Window x:Class="InteractiveTextbook.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:sc="clr-namespace:InteractiveTextbook.Converters"
        xmlns:local="clr-namespace:InteractiveTextbook.Views"
        Title="Interactive Textbook Viewer" 
        Height="800" 
        Width="1400"
        Background="#F5F5F5"
        WindowStartupLocation="CenterScreen">
    
    <DockPanel>
        <!-- Thanh cÃ´ng cá»¥ -->
        <Border DockPanel.Dock="Top" 
                Background="White" 
                Padding="10"
                Height="60">
            <StackPanel Orientation="Horizontal">
                <Button Content="ðŸ“‚ Má»Ÿ PDF" 
                    Command="{Binding LoadPdfCommand}"
                    Padding="10,5"
                    Margin="5"
                    FontSize="14"/>
            
            <Rectangle Width="1" Height="30" Fill="#DDD" Margin="5,0"/>
            
            <Button Content="â—€ Trang trÆ°á»›c" 
                    Click="PreviousPageButton_Click"
                    Padding="10,5"
                    Margin="5"
                    FontSize="14"/>
            
            <Button Content="Trang sau â–¶" 
                    Click="NextPageButton_Click"
                    Padding="10,5"
                    Margin="5"
                    FontSize="14"/>
            
            <Rectangle Width="1" Height="30" Fill="#DDD" Margin="5,0"/>
            
            <Button Content="ðŸ”+" 
                    Command="{Binding ZoomInCommand}"
                    Padding="8,5"
                    Margin="5"
                    FontSize="14"/>
            
            <Button Content="ðŸ”-" 
                    Command="{Binding ZoomOutCommand}"
                    Padding="8,5"
                    Margin="5"
                    FontSize="14"/>
            
            <Button Content="BÃ¬nh thÆ°á»ng" 
                    Command="{Binding ResetZoomCommand}"
                    Padding="10,5"
                    Margin="5"
                    FontSize="14"/>
            
            <TextBlock Text="{Binding ZoomLevel, StringFormat='0%'}" 
                       VerticalAlignment="Center" 
                       Margin="10,0"/>
            
            <TextBlock Text="{Binding StatusMessage}" 
                       VerticalAlignment="Center" 
                       Margin="20,0"
                       Foreground="Gray"/>
            </StackPanel>
        </Border>
        
        <!-- Thanh trang -->
        <Border DockPanel.Dock="Bottom" 
                Background="White" 
                Padding="10"
                Height="40">
            <StackPanel Orientation="Horizontal">
                <TextBlock Text="Trang:" VerticalAlignment="Center" Margin="0,0,10,0"/>
                <TextBlock Text="{Binding CurrentPage}" VerticalAlignment="Center" Margin="0,0,5,0" FontWeight="Bold"/>
                <TextBlock Text="/" VerticalAlignment="Center" Margin="0,0,5,0"/>
                <TextBlock Text="{Binding CurrentDocument.PageCount}" VerticalAlignment="Center"/>
            </StackPanel>
        </Border>
        
        <!-- Khu vá»±c hiá»ƒn thá»‹ PDF -->
        <Border BorderBrush="#DDD" BorderThickness="1" Background="#F0F0F0" Margin="10" x:Name="PdfViewerBorder">
            <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto" x:Name="ScrollViewerContent">
                <Grid HorizontalAlignment="Center" VerticalAlignment="Center" Margin="20">
                    <Grid HorizontalAlignment="Center" VerticalAlignment="Center">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        
                        <!-- TRANG TRÃI -->
                        <Border Grid.Column="0" BorderBrush="#999" BorderThickness="1" Background="White" Margin="10,10,-2,10" CornerRadius="2"
                                Width="{Binding ZoomLevel, Converter={x:Static sc:ZoomToWidthConverter.Instance}}"
                                Height="{Binding ZoomLevel, Converter={x:Static sc:ZoomToHeightConverter.Instance}}">
                            <Grid Name="LeftPageGrid">
                                <Image Source="{Binding LeftPageImage}" 
                                       Stretch="Fill"
                                       HorizontalAlignment="Center"
                                       VerticalAlignment="Center"/>
                                <TextBlock Text="Trang trá»‘ng"
                                           HorizontalAlignment="Center"
                                           VerticalAlignment="Center"
                                           Foreground="#CCC"
                                           FontSize="16"
                                           Visibility="{Binding LeftPageImage, Converter={x:Static sc:NullToVisibilityConverter.Instance}}"/>
                            </Grid>
                        </Border>
                        
                        <!-- PAGE FLIP CONTROL OVERLAY FOR LEFT PAGE (Trang láº­t vá» bÃªn trÃ¡i) -->
                        <local:PageFlipControl Grid.Column="0" x:Name="FlipControlLeft"
                                              CurrentPageImage="{Binding LeftPageImage}"
                                              NextPageImage="{Binding RightPageImage}"
                                              CurrentPage="{Binding CurrentPage}"
                                              TotalPages="{Binding CurrentDocument.PageCount, FallbackValue=0}"
                                              FlipCompleted="PageFlipControl_FlipCompleted"
                                              FlipCancelled="PageFlipControl_FlipCancelled"
                                              Visibility="Hidden"
                                              Margin="10,10,-2,10"
                                              Panel.ZIndex="100"/>
                        
                        <!-- TRANG PHáº¢I -->
                        <Border Grid.Column="1" BorderBrush="#999" BorderThickness="1" Background="White" Margin="-2,10,10,10" CornerRadius="2"
                                Width="{Binding ZoomLevel, Converter={x:Static sc:ZoomToWidthConverter.Instance}}"
                                Height="{Binding ZoomLevel, Converter={x:Static sc:ZoomToHeightConverter.Instance}}">
                            <Grid Name="RightPageGrid">
                                <Image Source="{Binding RightPageImage}" 
                                       Stretch="Fill"
                                       HorizontalAlignment="Center"
                                       VerticalAlignment="Center"/>
                                <TextBlock Text="Trang trá»‘ng"
                                           HorizontalAlignment="Center"
                                           VerticalAlignment="Center"
                                           Foreground="#CCC"
                                           FontSize="16"
                                           Visibility="{Binding RightPageImage, Converter={x:Static sc:NullToVisibilityConverter.Instance}}"/>
                            </Grid>
                        </Border>
                        
                        <!-- PAGE FLIP CONTROL OVERLAY FOR RIGHT PAGE (Trang láº­t vá» bÃªn pháº£i) -->
                        <local:PageFlipControl Grid.Column="1" x:Name="FlipControlRight"
                                              CurrentPageImage="{Binding RightPageImage}"
                                              NextPageImage="{Binding LeftPageImage}"
                                              CurrentPage="{Binding CurrentPage}"
                                              TotalPages="{Binding CurrentDocument.PageCount, FallbackValue=0}"
                                              FlipCompleted="PageFlipControl_FlipCompleted"
                                              FlipCancelled="PageFlipControl_FlipCancelled"
                                              Visibility="Hidden"
                                              Margin="-2,10,10,10"
                                              Panel.ZIndex="100"/>
                    </Grid>
                </Grid>
            </ScrollViewer>
        </Border>
    </DockPanel>
</Window>
